(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{5745:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var a=n(2322),l=n(2784),s=n(5237),r=n.n(s),o=n(1763),i=n.n(o),c=n(477),p=n(6505),d=n(9097),_=n.n(d),u=n(3027),m=n(2288),h=n(5070),C=n(18),x=n(6277),j=n(4206),b=n(3877),N=n(5796),g=n(5779);let v={name:"edit",definition:{svg:{viewBox:"0 0 20 20"},path:{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:1,d:"M5.7616 14C5.79493 14 5.82826 13.9967 5.8616 13.9917L8.66493 13.5C8.69826 13.4934 8.72993 13.4784 8.75326 13.4534L15.8183 6.38837C15.8833 6.32337 15.8833 6.21837 15.8183 6.15337L13.0483 3.38171C13.0166 3.35004 12.9749 3.33337 12.9299 3.33337C12.8849 3.33337 12.8433 3.35004 12.8116 3.38171L5.7466 10.4467C5.7216 10.4717 5.7066 10.5017 5.69993 10.535L5.20826 13.3384C5.1766 13.5234 5.23326 13.7034 5.36493 13.835C5.47493 13.9417 5.61326 14 5.7616 14ZM6.88488 11.093L12.9299 5.04968L14.1515 6.27135L8.10654 12.3147L6.62488 12.5763L6.88488 11.093ZM3.86659 15.4004H16.1333C16.4283 15.4004 16.6666 15.6388 16.6666 15.9338V16.5338C16.6666 16.6071 16.6066 16.6671 16.5333 16.6671H3.46659C3.39325 16.6671 3.33325 16.6071 3.33325 16.5338V15.9338C3.33325 15.6388 3.57159 15.4004 3.86659 15.4004Z"}}};var k=n(4431),f=n.n(k);let y=e=>{let{children:t,uuid:n,setEditUuid:l,setPushUuid:s,canNotUp:r,canNotDown:o}=e,{remove:i,onUp:c,onDown:p}=(0,u.y)();return(0,a.jsxs)("div",{className:f().root,children:[t,(0,a.jsxs)("div",{className:f().controllerWrapper,children:[(0,a.jsx)(h.hU,{type:"button",size:"large",className:f().actionBtn,onClick:()=>{l(n)},children:(0,a.jsx)(C.Z,{icon:v,className:f().icon})}),(0,a.jsx)(h.hU,{type:"button",size:"large",className:(0,x.Z)(f().actionBtn,{[f().disabled]:r}),onClick:()=>{c(n)},disabled:r,children:(0,a.jsx)(C.Z,{icon:j.H,className:f().icon})}),(0,a.jsx)(h.hU,{type:"button",size:"large",className:(0,x.Z)(f().actionBtn,{[f().disabled]:o}),onClick:()=>{p(n)},disabled:o,children:(0,a.jsx)(C.Z,{icon:b.v,className:f().icon})}),(0,a.jsx)(h.hU,{type:"button",size:"large",className:f().actionBtn,onClick:()=>{i(n)},children:(0,a.jsx)(C.Z,{icon:N.X,className:f().icon})})]}),(0,a.jsx)("div",{className:f().plusWrapper,children:(0,a.jsx)(h.hU,{type:"button",onClick:()=>{s(n)},className:f().plusBtn,children:(0,a.jsx)(C.Z,{icon:g.p,className:f().plusIcon})})})]})};var W=n(7960),w=n.n(W);let L=r()(()=>Promise.all([n.e(276),n.e(3)]).then(n.bind(n,5003)),{loadableGenerated:{webpack:()=>[5003]},ssr:!1});var Z=function(){let[e,t]=(0,l.useState)(!1),n=(0,l.useRef)(null),{templateUuids:s,templatesDataWithUuid:r}=(0,u.y)(),[o,d]=(0,l.useState)(""),[h,C]=(0,l.useState)(""),x=(0,l.useCallback)(()=>{d("")},[]),j=(0,l.useCallback)(()=>{C("")},[]),b=()=>{t(!0);let e=n.current;e&&i()(e).then(e=>{let n=e.toDataURL("image/png"),a=new c.ZP("p","mm","a4",!0),l=a.internal.pageSize.getWidth(),s=a.internal.pageSize.getHeight(),r=e.width,o=e.height,i=Math.min(l/r,s/o);a.addImage(n,"PNG",(l-r*i)/2,0,r*i,o*i),a.save("page.pdf"),t(!1)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:w().root,children:(0,a.jsx)("div",{className:w().paper,ref:n,children:s.map((e,t)=>{let n=r[e],l=m._2[n.id].Template;return(0,a.jsx)(y,{uuid:e,setEditUuid:d,setPushUuid:C,canNotUp:0===t,canNotDown:t===s.length-1,children:(0,a.jsx)("div",{className:w().templateWrapper,children:(0,a.jsx)(l,{...n.props})})},e)})})}),(0,a.jsx)("div",{className:w().emptyArea}),(0,a.jsxs)("div",{className:w().btnWrapper,children:[(0,a.jsx)(_(),{href:"/preview",className:w().btn,children:(0,a.jsx)("span",{className:w().text,children:"Preview"})}),(0,a.jsx)("button",{type:"button",onClick:b,className:w().btn,disabled:0===s.length||e,children:e?(0,a.jsx)(p.Z,{loading:!0}):(0,a.jsx)("span",{className:w().text,children:"Download"})})]}),(0,a.jsx)(L,{open:!!o,onClose:x,uuid:o,editMode:!0}),(0,a.jsx)(L,{open:!!h,onClose:j,uuid:h})]})}},4431:function(e){e.exports={root:"Controller_root__MjmgV",controllerWrapper:"Controller_controllerWrapper__6jFx3",plusWrapper:"Controller_plusWrapper__ZhE_a",actionBtn:"Controller_actionBtn__CFypS",disabled:"Controller_disabled__uiYaw",icon:"Controller_icon__IyJop",plusBtn:"Controller_plusBtn__FLc0k",plusIcon:"Controller_plusIcon__7OPre"}},7960:function(e){e.exports={root:"TemplatesContainer_root__XHOvX",paper:"TemplatesContainer_paper__YkSaL",templateWrapper:"TemplatesContainer_templateWrapper__0z_yv",emptyArea:"TemplatesContainer_emptyArea__xkD6X",btnWrapper:"TemplatesContainer_btnWrapper__XkgPw",btn:"TemplatesContainer_btn__kQgIu",text:"TemplatesContainer_text__iR_w4"}}}]);