(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5003:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return M}});var a=t(2322),r=t(8702),d=t(2784),i=t(455),o=t(5070),s=t(6277),n=t(18),p=t(3088),c=t(2309),m=t(4699),_=t(3955);let u=e=>{let{methods:l,children:t,className:r,onSubmit:d=()=>{},onInvalid:i=()=>{}}=e;return(0,a.jsx)(_.RV,{...l,children:(0,a.jsx)("form",{onSubmit:l.handleSubmit(d,i),className:r,children:t})})};var h=t(4304),f=t(3027),x=t(8398),j=t.n(x);let v=e=>{let{onClose:l,editMode:t,uuid:r}=e,{push:x,pushUnderUuid:v,edit:b,templatesData:w}=(0,f.y)(),[M,E]=(0,d.useState)(0),N=(0,d.useMemo)(()=>t&&r?h._[w[r].id]:h._[h.l[M]],[t,r,w,M]),B=(0,d.useMemo)(()=>t&&r?w[r].props:N.defaultValues,[w,t,r,N]),T=(0,_.cI)({defaultValues:B}),g=T.watch(),C=(0,d.useCallback)(()=>{0!==M&&E(e=>e-1)},[M]),k=(0,d.useCallback)(()=>{M!==h.l.length-1&&E(e=>e+1)},[M]);return(0,a.jsxs)(u,{methods:T,className:j().form,onSubmit:e=>{r?t?b({uuid:r,props:g}):v({id:N.id,uuid:r,props:e}):x({id:N.id,props:e}),l()},children:[(0,a.jsx)(i.Z,{className:j().modalHeader,children:"選擇模板"}),(0,a.jsxs)("div",{className:j().previewWrapper,children:[!t&&(0,a.jsx)(o.hU,{type:"button",size:"large",onClick:C,className:(0,s.Z)(j().arrowBtn,j().leftBtn),disabled:0===M,children:(0,a.jsx)(n.Z,{icon:c.w})}),(0,a.jsx)("div",{className:j().preview,children:N.Template({...g})}),!t&&(0,a.jsx)(o.hU,{type:"button",size:"large",onClick:k,className:(0,s.Z)(j().arrowBtn,j().rightBtn),disabled:M===h.l.length-1,children:(0,a.jsx)(n.Z,{icon:m.X})})]}),(0,a.jsx)("div",{className:j().fieldsWrapper,children:N.Editor()}),(0,a.jsxs)("div",{className:j().modalFooter,children:[(0,a.jsx)(p.Z,{type:"button",variant:"contained",size:"large",onClick:l,children:"關閉"}),(0,a.jsx)(p.Z,{type:"submit",variant:"contained",size:"large",children:"確定"})]})]})};var b=(0,d.memo)(v);let w=e=>{let{open:l,onClose:t,editMode:d,uuid:i}=e;return(0,a.jsx)(r.Z,{open:l,onClose:t,className:j().root,direction:"left",children:(0,a.jsx)(b,{onClose:t,uuid:i,editMode:d})})};var M=w},8398:function(e){e.exports={root:"TemplateEditModal_root___R_8K",form:"TemplateEditModal_form__MVDyd",modalHeader:"TemplateEditModal_modalHeader__carOO",previewWrapper:"TemplateEditModal_previewWrapper__UPsFt",preview:"TemplateEditModal_preview__FVUPr",arrowBtn:"TemplateEditModal_arrowBtn__og4Lb",leftBtn:"TemplateEditModal_leftBtn__NduzA",rightBtn:"TemplateEditModal_rightBtn__CDFO3",fieldsWrapper:"TemplateEditModal_fieldsWrapper__GBSA_",modalFooter:"TemplateEditModal_modalFooter__F_7rl"}}}]);