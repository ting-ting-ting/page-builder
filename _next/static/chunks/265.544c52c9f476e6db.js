(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265,3],{3658:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var i=a(2322),l=a(2784);let r={name:"spinner",definition:{svg:{viewBox:"0 0 24 24"},path:{fill:"currentColor",fillRule:"evenodd",d:"M12 4a8 8 0 0 1 8 8h0-1.715c.001-3.394-2.69-6.16-6.055-6.282L12 5.714z"}}},n="mzn-button",d={host:n,label:`${n}__label`,variant:e=>"text"===e?"":`${n}--${e}`,color:e=>`${n}--${e}`,size:e=>`${n}--${e}`,danger:`${n}--danger`,disabled:`${n}--disabled`,icon:`${n}--icon`,loading:`${n}--loading`};var o=a(5138),s=a(18),c=a(6277);let p=(0,l.forwardRef)(function(e,t){let{size:a}=(0,l.useContext)(o.o),{children:n,className:p,color:u="primary",component:m="button",danger:_=!1,disabled:f=!1,loading:v=!1,onClick:x,prefix:h,size:j=a,suffix:w,variant:b="text",...C}=e,M=h,g=w;if(v){let e=(0,i.jsx)(s.Z,{icon:r,spin:!0});g&&!M?g=e:M=e}let B=null==n&&!!(M||g);return(0,i.jsxs)(m,{...C,ref:t,"aria-disabled":f,className:(0,c.Z)(d.host,d.variant(b),d.color(u),d.size(j),{[d.danger]:_,[d.disabled]:f,[d.icon]:B,[d.loading]:v},p),disabled:f,onClick:e=>{f||v||!x||x(e)},children:[M,n&&(0,i.jsx)("span",{className:d.label,children:n}),g]})});var u=p},5070:function(e,t,a){"use strict";a.d(t,{hU:function(){return d}});var i=a(2322),l=a(2784),r=a(3658);let n=(0,l.forwardRef)(function(e,t){let{children:a,...l}=e;return(0,i.jsx)(r.Z,{...l,ref:t,prefix:a})}),d=n},5138:function(e,t,a){"use strict";a.d(t,{o:function(){return l}});var i=a(2784);let l=(0,i.createContext)({size:"medium"})},3080:function(e,t,a){"use strict";a.r(t);var i=a(2322),l=a(2784),r=a(18),n=a(5779),d=a(5003),o=a(8234),s=a.n(o);let c=()=>{let[e,t]=(0,l.useState)(!1),a=(0,l.useCallback)(()=>{t(!1)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:s().root,children:(0,i.jsx)("div",{className:s().area,onClick:()=>{t(e=>!e)},children:(0,i.jsx)(r.Z,{icon:n.p,className:s().icon})})}),(0,i.jsx)(d.default,{open:e,onClose:a})]})};t.default=c},5003:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var i=a(2322),l=a(2784),r=a(753),n=a(856),d=a(6992),o=a(6277),s=a(2288),c=a(3027),p=a(5070),u=a(18),m=a(3658),_=a(2309),f=a(4699),v=a(3955);let x=e=>{let{methods:t,children:a,className:l,onSubmit:r=()=>{},onInvalid:n=()=>{}}=e;return(0,i.jsx)(v.RV,{...t,children:(0,i.jsx)("form",{onSubmit:t.handleSubmit(r,n),className:l,children:a})})};var h=a(8398),j=a.n(h);let w=e=>{let{targetCategoryId:t,targetIndex:a,setTargetIndex:r,onClose:n,editMode:d,uuid:h}=e,{push:w,pushUnderUuid:b,edit:C,templatesDataWithUuid:M}=(0,c.y)(),g=(0,l.useMemo)(()=>s._2[s.lq[t][a]],[t,a]),B=(0,l.useMemo)(()=>d&&h&&M[h].id===g.id?M[h].props:g.defaultValues,[M,d,h,g]),N=(0,v.cI)({defaultValues:B}),E=N.watch(),T=(0,l.useCallback)(()=>{0!==a&&r(e=>e-1)},[a,r]),k=(0,l.useCallback)(()=>{a!==s.lq[t].length-1&&r(e=>e+1)},[t,a,r]);return(0,i.jsxs)(x,{methods:N,className:j().form,onSubmit:e=>{h?d?C({id:g.id,uuid:h,props:E}):b({id:g.id,uuid:h,props:e}):w({id:g.id,props:e}),n()},children:[(0,i.jsxs)("div",{className:j().previewWrapper,children:[(0,i.jsx)(p.hU,{type:"button",size:"large",onClick:T,className:(0,o.Z)(j().arrowBtn,j().leftBtn),disabled:0===a,children:(0,i.jsx)(u.Z,{icon:_.w})}),(0,i.jsx)("div",{className:j().preview,children:g.Template({...E})}),(0,i.jsx)(p.hU,{type:"button",size:"large",onClick:k,className:(0,o.Z)(j().arrowBtn,j().rightBtn),disabled:a===s.lq[t].length-1,children:(0,i.jsx)(u.Z,{icon:f.X})})]}),(0,i.jsx)("div",{className:j().fieldsContainer,children:(0,i.jsx)("div",{className:j().fieldsWrapper,children:g.Editor()})}),(0,i.jsxs)("div",{className:j().modalFooter,children:[(0,i.jsx)(m.Z,{type:"button",variant:"contained",size:"large",onClick:n,children:"關閉"}),(0,i.jsx)(m.Z,{type:"submit",variant:"contained",size:"large",children:"確定"})]})]})};var b=(0,l.memo)(w);let C=e=>{var t;let{open:a,onClose:p,editMode:u,uuid:m}=e,{templatesDataWithUuid:_}=(0,c.y)(),[f,v]=(0,l.useState)(s.Y2[0].id),[x,h]=(0,l.useState)(0),w=(0,l.useMemo)(()=>null!==(t=s.Y2.find(e=>e.id===f))&&void 0!==t?t:null,[f]),C=(0,l.useMemo)(()=>s.lq[f],[f]),M=(0,l.useCallback)(e=>{v(e),h(0)},[]),g=(0,l.useMemo)(()=>u&&m?s._2[_[m].id]:null,[u,m,_]);return(0,l.useEffect)(()=>{if(g&&a){let e=g.category,t=s.lq[e].findIndex(e=>e===g.id);v(e),h(t)}},[g,a]),(0,l.useEffect)(()=>{a||(v(s.Y2[0].id),h(0))},[a]),(0,i.jsxs)(r.Z,{open:a,onClose:p,className:j().root,direction:"left",children:[(0,i.jsxs)("div",{className:j().modalHeader,children:[(0,i.jsx)("span",{className:j().modalTitle,children:"選擇模板"}),(0,i.jsx)(n.Z,{onChange:e=>{M(e.id)},value:w,children:null===s.Y2||void 0===s.Y2?void 0:s.Y2.map(e=>(0,i.jsx)(d.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)("div",{className:j().previewBtnContainer,children:(0,i.jsx)("div",{className:j().previewBtnWrapper,children:C.map((e,t)=>{let a=s._2[e].Preview;return(0,i.jsx)("div",{className:(0,o.Z)(j().previewBtn,{[j().active]:t===x}),onClick:()=>{h(t)},children:(0,i.jsx)(a,{})},e)})})}),(0,i.jsx)(b,{targetCategoryId:f,targetIndex:x,setTargetIndex:h,onClose:p,uuid:m,editMode:u},"".concat(f,"-").concat(x,"-").concat(null!=m?m:"create"))]})};var M=C},8234:function(e){e.exports={root:"AddArea_root__bxdO5",area:"AddArea_area__BMoXI",icon:"AddArea_icon__DPGfa"}},8398:function(e){e.exports={root:"TemplateEditModal_root___R_8K",modalHeader:"TemplateEditModal_modalHeader__carOO",modalTitle:"TemplateEditModal_modalTitle__L3oBO",previewBtnContainer:"TemplateEditModal_previewBtnContainer__ijioB",previewBtnWrapper:"TemplateEditModal_previewBtnWrapper__Tz6uQ",previewBtn:"TemplateEditModal_previewBtn__ltEPs",active:"TemplateEditModal_active__dwqGn",form:"TemplateEditModal_form__MVDyd",previewWrapper:"TemplateEditModal_previewWrapper__UPsFt",preview:"TemplateEditModal_preview__FVUPr",arrowBtn:"TemplateEditModal_arrowBtn__og4Lb",leftBtn:"TemplateEditModal_leftBtn__NduzA",rightBtn:"TemplateEditModal_rightBtn__CDFO3",fieldsContainer:"TemplateEditModal_fieldsContainer__W2k4d",fieldsWrapper:"TemplateEditModal_fieldsWrapper__GBSA_",modalFooter:"TemplateEditModal_modalFooter__F_7rl"}}}]);