(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5003:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var l=a(2322),r=a(2784),d=a(8702),i=a(455),o=a(5070),s=a(6277),n=a(18),c=a(3088),p=a(2309),m=a(4699),_=a(3955);let u=e=>{let{methods:t,children:a,className:r,onSubmit:d=()=>{},onInvalid:i=()=>{}}=e;return(0,l.jsx)(_.RV,{...t,children:(0,l.jsx)("form",{onSubmit:t.handleSubmit(d,i),className:r,children:a})})};var h=a(6484),x=a(3027),f=a(8398),j=a.n(f);let v=e=>{let{targetIndex:t,setTargetIndex:a,onClose:d,editMode:f,uuid:v}=e,{push:b,pushUnderUuid:w,edit:M,templatesData:E}=(0,x.y)(),N=(0,r.useMemo)(()=>f&&v?h._[E[v].id]:h._[h.l[t]],[f,v,E,t]),g=(0,r.useMemo)(()=>f&&v?E[v].props:N.defaultValues,[E,f,v,N]),T=(0,_.cI)({defaultValues:g}),B=T.watch(),C=(0,r.useCallback)(()=>{0!==t&&a(e=>e-1)},[t,a]),k=(0,r.useCallback)(()=>{t!==h.l.length-1&&a(e=>e+1)},[t,a]);return(0,l.jsxs)(u,{methods:T,className:j().form,onSubmit:e=>{v?f?M({uuid:v,props:B}):w({id:N.id,uuid:v,props:e}):b({id:N.id,props:e}),d()},children:[(0,l.jsx)(i.Z,{className:j().modalHeader,children:"選擇模板"}),(0,l.jsxs)("div",{className:j().previewWrapper,children:[!f&&(0,l.jsx)(o.hU,{type:"button",size:"large",onClick:C,className:(0,s.Z)(j().arrowBtn,j().leftBtn),disabled:0===t,children:(0,l.jsx)(n.Z,{icon:p.w})}),(0,l.jsx)("div",{className:j().preview,children:N.Template({...B})}),!f&&(0,l.jsx)(o.hU,{type:"button",size:"large",onClick:k,className:(0,s.Z)(j().arrowBtn,j().rightBtn),disabled:t===h.l.length-1,children:(0,l.jsx)(n.Z,{icon:m.X})})]}),(0,l.jsx)("div",{className:j().fieldsWrapper,children:N.Editor()}),(0,l.jsxs)("div",{className:j().modalFooter,children:[(0,l.jsx)(c.Z,{type:"button",variant:"contained",size:"large",onClick:d,children:"關閉"}),(0,l.jsx)(c.Z,{type:"submit",variant:"contained",size:"large",children:"確定"})]})]})};var b=(0,r.memo)(v);let w=e=>{let{open:t,onClose:a,editMode:i,uuid:o}=e,[s,n]=(0,r.useState)(0);return(0,l.jsx)(d.Z,{open:t,onClose:a,className:j().root,direction:"left",children:(0,l.jsx)(b,{onClose:a,uuid:o,editMode:i,targetIndex:s,setTargetIndex:n},"".concat(s,"-").concat(null!=o?o:"create"))})};var M=w},8398:function(e){e.exports={root:"TemplateEditModal_root___R_8K",form:"TemplateEditModal_form__MVDyd",modalHeader:"TemplateEditModal_modalHeader__carOO",previewWrapper:"TemplateEditModal_previewWrapper__UPsFt",preview:"TemplateEditModal_preview__FVUPr",arrowBtn:"TemplateEditModal_arrowBtn__og4Lb",leftBtn:"TemplateEditModal_leftBtn__NduzA",rightBtn:"TemplateEditModal_rightBtn__CDFO3",fieldsWrapper:"TemplateEditModal_fieldsWrapper__GBSA_",modalFooter:"TemplateEditModal_modalFooter__F_7rl"}}}]);