(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{5003:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return M}});var t=a(2322),r=a(7925),i=a(2784),d=a(455),s=a(5070),o=a(6277),n=a(18),c=a(3658),p=a(2309),m=a(4699),_=a(3955);let u=e=>{let{methods:l,children:a,className:r,onSubmit:i=()=>{},onInvalid:d=()=>{}}=e;return(0,t.jsx)(_.RV,{...l,children:(0,t.jsx)("form",{onSubmit:l.handleSubmit(i,d),className:r,children:a})})};var h=a(5934),f=a(3027),x=a(8398),j=a.n(x);let v=e=>{let{onClose:l,uuid:a}=e,{push:r,edit:x,templatesData:v}=(0,f.y)(),b=(0,i.useMemo)(()=>!!a,[a]),[w,M]=(0,i.useState)(0),E=(0,i.useMemo)(()=>a?h._[v[a].id]:h._[h.l[w]],[a,v,w]),N=(0,i.useMemo)(()=>a?v[a].props:E.defaultValues,[v,a,E]),B=(0,_.cI)({defaultValues:N}),T=B.watch(),g=(0,i.useCallback)(()=>{0!==w&&M(e=>e-1)},[w]),C=(0,i.useCallback)(()=>{w!==h.l.length-1&&M(e=>e+1)},[w]);return(0,t.jsxs)(u,{methods:B,className:j().form,onSubmit:e=>{a?x({uuid:a,props:T}):r({id:E.id,props:e}),l()},children:[(0,t.jsx)(d.Z,{className:j().modalHeader,children:"選擇模板"}),(0,t.jsxs)("div",{className:j().previewWrapper,children:[!b&&(0,t.jsx)(s.hU,{type:"button",size:"large",onClick:g,className:(0,o.Z)(j().arrowBtn,j().leftBtn),disabled:0===w,children:(0,t.jsx)(n.Z,{icon:p.w})}),(0,t.jsx)("div",{className:j().preview,children:E.Template({...T})}),!b&&(0,t.jsx)(s.hU,{type:"button",size:"large",onClick:C,className:(0,o.Z)(j().arrowBtn,j().rightBtn),disabled:w===h.l.length-1,children:(0,t.jsx)(n.Z,{icon:m.X})})]}),(0,t.jsx)("div",{className:j().fieldsWrapper,children:E.Editor()}),(0,t.jsxs)("div",{className:j().modalFooter,children:[(0,t.jsx)(c.Z,{type:"button",variant:"contained",size:"large",onClick:l,children:"關閉"}),(0,t.jsx)(c.Z,{type:"submit",variant:"contained",size:"large",children:"確定"})]})]})};var b=(0,i.memo)(v);let w=e=>{let{open:l,onClose:a,uuid:i}=e;return(0,t.jsx)(r.Z,{open:l,onClose:a,className:j().root,direction:"left",children:(0,t.jsx)(b,{onClose:a,uuid:i})})};var M=w},8398:function(e){e.exports={root:"TemplateEditModal_root___R_8K",form:"TemplateEditModal_form__MVDyd",modalHeader:"TemplateEditModal_modalHeader__carOO",previewWrapper:"TemplateEditModal_previewWrapper__UPsFt",preview:"TemplateEditModal_preview__FVUPr",arrowBtn:"TemplateEditModal_arrowBtn__og4Lb",leftBtn:"TemplateEditModal_leftBtn__NduzA",rightBtn:"TemplateEditModal_rightBtn__CDFO3",fieldsWrapper:"TemplateEditModal_fieldsWrapper__GBSA_",modalFooter:"TemplateEditModal_modalFooter__F_7rl"}}}]);